---
// ... 其他导入和frontmatter ...
---

<html>
  <head>
    <!-- ... 现有的head内容 ... -->
  </head>
  <body>
    <slot />
    <script is:inline>
      // 立即执行函数
      (function() {
        function handleExternalLinks() {
          const links = document.getElementsByTagName('a');
          for (let i = 0; i < links.length; i++) {
            const link = links[i];
            if (link.hostname !== window.location.hostname && link.hostname !== '') {
              link.setAttribute('target', '_blank');
              link.setAttribute('rel', 'noopener noreferrer');
              console.log('Modified external link:', link.href); // 用于调试
            }
          }
        }

        // 首次执行
        handleExternalLinks();

        // 监听动态内容变化
        const observer = new MutationObserver(handleExternalLinks);
        observer.observe(document.body, {
          childList: true,
          subtree: true
        });
      })();
    </script>
  </body>
</html> 